<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>daum 을 이용한 우편번호 및 주소찾기</title>

<link rel="stylesheet" type="text/css" href="css/style.css">

</head>
<body>
	<div if="container" align="center">
		<table>			
			<tr>
				<td class="title">우편번호</td>
				<td>
					<input type="text" id="postcode" size="5" placeholder="우편번호" />
					&nbsp;&nbsp;
					<button type="button" style="width: 100px; height: 20px; font-size: 9pt; font-weight: ligther;" onclick="openDaumPOST();">우편번호찾기</button>	
				</td>
			</tr>
			<tr>
				<td class="title">주소</td>
				<td>
					<input type="text" id="address" size="65" placeholder="주소" /><br/>
					<input type="text" id="detailAddress" size="50" placeholder="상세주소" />
					<input type="text" id="extraAddress" size="50" placeholder="참고항목" />
				</td>
			</tr>
		</table>
	</div>
	
	<script type="text/javascript" src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script type="text/javascript">
		function openDaumPOST() {
			new daum.Postcode({
				oncomplete: function(data) {
					let addr = '';
					let extraAddr = '';
					
					if(data.userSelectedType === 'R') {
						addr = data.roadAddress;
					} else {
						addr = data.jibunAddress;
					}
					
					if(data.userSelectedType === 'R') {
						
						if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
							extraAddr += data.bname;
						}
						if(data.buildingName !== '' && data.apartment === 'Y') {
							extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
						}
						if(extraAddr !== '') {
							extraAddr = ' (' + extraAddr + ')';
						}
						document.getElementById("extraAddress").value = extraAddr;
					} else {
						document.getElementById("extraAddress").value = '';
					}
					
					document.getElementById('postcode').value = data.zonecode;
					document.getElementById("address").value = addr;
					document.getElementById("detailAddress").focus();
				}
			}).open();
		}
	</script>
</body>
</html>